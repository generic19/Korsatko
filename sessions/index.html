<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Korsatko</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&family=Cairo:wght@300;400;700&display=fallback">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="/plugins/fontawesome-free/css/all.min.css">
    <!-- overlayScrollbars -->
    <link rel="stylesheet" href="/plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="/plugins/adminlte/css/adminlte-rtl.css">
    <!-- DataTables -->
    <link rel="stylesheet" href="/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="/plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
    <link rel="stylesheet" href="/plugins/datatables-buttons/css/buttons.bootstrap4.min.css">

    <link rel="stylesheet" href="/dist/css/style.css">
</head>

<body>

    <body class="hold-transition sidebar-mini layout-fixed rtl">
        <!-- Site wrapper -->
        <div class="wrapper">
            <!-- Navbar -->
            <nav class="main-header navbar navbar-expand navbar-white navbar-light">
                <!-- Left navbar links -->
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i
                                class="fas fa-bars"></i></a>
                    </li>
                    <li class="nav-item d-none d-sm-inline-block">
                        <a href="../../index3.html" class="nav-link active">
                            <p class="arabic">الصفحة الرئيسية</p>
                        </a>
                    </li>
                    <li class="nav-item d-none d-sm-inline-block">
                        <a href="#" class="nav-link">
                            <p class="arabic">الدعم التقني</p>
                        </a>
                    </li>
                </ul>

                <!-- Right navbar links -->
                <ul class="navbar-nav ml-auto">
                    <!-- Notifications Dropdown Menu -->
                    <li class="nav-item dropdown">
                        <a class="nav-link" data-toggle="dropdown" href="#">
                            <i class="far fa-bell"></i>
                            <span class="badge badge-danger navbar-badge">8</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                            <span class="dropdown-item dropdown-header">
                                <p class="arabic xs">
                                    8 إشعارات جديدة
                                </p>
                            </span>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                <i class="fas fa-exclamation-triangle mr-2"></i>
                                <span class="arabic">
                                    5 تنبيهات
                                </span>
                                <span class="float-left text-muted text-sm">3 mins</span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                <i class="fas fa-file mr-2"></i>
                                <span class="arabic">
                                    3 تقارير
                                </span>
                                <span class="float-left text-muted text-sm">2 days</span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item dropdown-footer">
                                <p class="arabic sm">
                                    الإطلاع على جميع الإشعارات
                                </p>
                            </a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </a>
                    </li>
                </ul>
            </nav>
            <!-- /.navbar -->

            <!-- Main Sidebar Container -->
            <aside class="main-sidebar sidebar-dark-primary elevation-4">
                <!-- Brand Logo -->
                <a href="index.html" class="brand-link">
                    <img src="/dist/img/k-logo-t.png" alt="Korsatko Logo" class="brand-image">
                    <span class="brand-text font-weight-light">Korsatko</span>
                </a>

                <!-- Sidebar -->
                <div class="sidebar">

                    <!-- Sidebar Menu -->
                    <nav class="mt-2">
                        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu"
                            data-accordion="false">

                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <i class="nav-icon fas fa-tachometer-alt"></i>
                                    <p class="arabic">
                                        لوحة القيادة
                                    </p>
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <i class="nav-icon fas fa-book"></i>
                                    <p class="arabic">الكورسات</p>
                                    <i class="fas fa-angle-left left"></i>
                                </a>

                                <ul class="nav nav-treeview">
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">
                                            <i class="nav-icon fas fa-table"></i>
                                            <p class="arabic">عرض الكورسات</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">
                                            <i class="nav-icon fas fa-table"></i>
                                            <p class="arabic">عرض المواعيد</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">
                                            <i class="nav-icon fas fa-plus"></i>
                                            <p class="arabic">إضافة كورس</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">
                                            <i class="nav-icon fas fa-plus"></i>
                                            <p class="arabic">إضافة معاد لكورس</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>

                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <i class="nav-icon fas fa-chalkboard-teacher"></i>
                                    <p class="arabic">المدربين</p>
                                    <i class="fas fa-angle-left left"></i>
                                </a>

                                <ul class="nav nav-treeview">
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">
                                            <i class="nav-icon fas fa-table"></i>
                                            <p class="arabic">عرض المدربين</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">
                                            <i class="nav-icon fas fa-plus"></i>
                                            <p class="arabic">إضافة مدرب</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>

                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <i class="nav-icon fas fa-book-reader"></i>
                                    <p class="arabic">الطلاب</p>
                                    <i class="fas fa-angle-left left"></i>
                                </a>

                                <ul class="nav nav-treeview">
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">
                                            <i class="nav-icon fas fa-table"></i>
                                            <p class="arabic">عرض الطلاب</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">
                                            <i class="nav-icon fas fa-plus"></i>
                                            <p class="arabic">إضافة طالب</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">
                                            <i class="nav-icon fas fa-user-plus"></i>
                                            <p class="arabic">تسجيل طالب بكورس</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                    <!-- /.sidebar-menu -->
                </div>
                <!-- /.sidebar -->
            </aside>

            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">

                <!-- Content Header (Page header) -->
                <section class="container content-header mb-2">
                    <div class="px-3 px-sm-2 px-lg-3">
                        <div class="row mt-3 mb-1">
                            <h1 class="arabic">المواعيد</h1>
                        </div>

                        <div class="row">
                            <ol class="breadcrumb arabic sm">
                                <li class="breadcrumb-item">
                                    <a href="#">الصفحة الرئيسية</a>
                                </li>
                                <li class="breadcrumb-item">
                                    المواعيد
                            </ol>
                        </div>
                    </div>

                </section>

                <!-- Main content -->
                <section class="content pb-5">
                    <div class="container">
                        <div class="card">
                            <div class="card-body arabic">
                                <div class="row">
                                    <div class="col-12 col-sm-8" id="tableButtons"></div>

                                    <div class="col-12 col-sm-4">
                                        <input type="text" id="search" class="form-control d-inline w-100 w-sm-auto float-left"
                                            placeholder="بحث">
                                    </div>
                                </div>

                                <table id="datatable" class="table table-hover">
                                    <thead class="thead-light">
                                        <tr>
                                            <th>الكورس</th>
                                            <th>المدرب</th>
                                            <th>تاريخ البداية</th>
                                            <th>تاريخ النهاية</th>
                                            <th>الموعد الأسبوعي</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- /.content -->
            </div>
            <!-- /.content-wrapper -->

            <footer class="main-footer">
                <div>
                    <span class="arabic sm">
                        حقوق الطبع والنشر
                    </span>
                    <!-- <strong> -->
                    &copy;
                    2023
                    Korsatko.
                    <!-- </strong> -->
                    <span class="arabic sm">
                        جميع الحقوق محفوظة.
                    </span>
                </div>
            </footer>

            <!-- Control Sidebar -->
            <aside class="control-sidebar control-sidebar-dark">
                <!-- Control sidebar content goes here -->
            </aside>
            <!-- /.control-sidebar -->
        </div>
        <!-- ./wrapper -->
        
        
        <!-- Element templates -->
        <table class="d-none">
            <td id="buttonsCellTemplate" class="text-nowrap d-none">
                <a href="#" class="btn icon-btn-sm btn-outline-primary m-1">
                    <i class="fas fa-edit"></i>
                </a>
                <a href="#" class="btn icon-btn-sm btn-outline-danger m-1">
                    <i class="fas fa-trash"></i>
                </a>
            </td>
        </table>
        

        <!-- jQuery -->
        <script src="/plugins/jquery/jquery.min.js"></script>
        <!-- Bootstrap 4 -->
        <script src="/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
        <!-- overlayScrollbars -->
        <script src="/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
        <!-- AdminLTE App -->
        <script src="/plugins/adminlte/js/adminlte.min.js"></script>
        <!-- DataTables -->
        <script src="/plugins/datatables/jquery.dataTables.min.js"></script>
        <script src="/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
        <script src="/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
        <script src="/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
        <script src="/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
        <script src="/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
        <script src="/plugins/jszip/jszip.min.js"></script>
        <script src="/plugins/pdfmake/pdfmake.min.js"></script>
        <script src="/plugins/pdfmake/vfs_fonts.js"></script>
        <script src="/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
        <script src="/plugins/datatables-buttons/js/buttons.print.min.js"></script>
        <script src="/plugins/datatables-buttons/js/buttons.colVis.min.js"></script>


        <script>
            // Mock instructors:
            
            const instructorNames = [
                "كامل كمال راشد حسام",
                "حازم فرج عياض رمضان",
                "رؤوف يامن عادل صفوان",
                "خالد مجيد عامر حسام",
                "منيب كاظم رياض رشاد",
                "أمان فهمي غفار حليم",
                "عاصي سماح عادل رمضان",
                "مؤنس حذيفة رضا ياسر",
                "ياسين المقداد ذاكر سامر",
                "مجدي عطا رامز سفيان",
            ];
            
            let _nextInstructorIndex = 0;
            
            const getNextInstructor = () => {
                return instructorNames[_nextInstructorIndex++ % instructorNames.length];
            }
            
            
            // Mock courses:
            
            const dayNames = {
                sun: "الأحد",
                mon: "الاثنين",
                tue: "الثلاثاء",
                wed: "الأربعاء",
                thu: "الخميس",
                fri: "الجمعة",
                sat: "السبت"
            };
            
            const courses = {
                1: {
                    name: "أساسيات Python",
                    sessions: [
                        { id: 11, days: ["wed", "thu"], time: { start: "08:00", end: "10:00" }},
                        { id: 12, days: ["sun", "tue"], time: { start: "13:00", end: "15:00" }},
                        { id: 13, days: ["mon", "fri"], time: { start: "18:00", end: "20:00" }},
                    ]
                },
                2: {
                    name: "البرمجة الشيئية باستخدام Java",
                    sessions: [
                        { id: 21, days: ["sun", "tue"], time: { start: "09:00", end: "11:00" }},
                        { id: 22, days: ["mon", "wed"], time: { start: "12:00", end: "14:00" }},
                        { id: 23, days: ["thu", "sat"], time: { start: "20:00", end: "22:00" }},
                    ]
                },
                3: {
                    name: "تطوير حلول الويب باستخدام PHP",
                    sessions: [
                        { id: 31, days: ["wed", "thu"], time: { start: "09:00", end: "11:00" }},
                        { id: 32, days: ["sun", "tue"], time: { start: "12:00", end: "14:00" }},
                        { id: 33, days: ["mon", "fri"], time: { start: "20:00", end: "22:00" }},
                    ]
                },
                4: {
                    name: "Embedded C",
                    sessions: [
                        { id: 43, days: ["mon", "fri"], time: { start: "18:00", end: "20:00" }},
                    ]
                },
                5: {
                    name: "CCNA",
                    sessions: [
                        { id: 52, days: ["mon", "wed"], time: { start: "12:00", end: "14:00" }},
                        { id: 53, days: ["thu", "sat"], time: { start: "20:00", end: "22:00" }},
                    ]
                },
            };
            
            const formatSession = sesh => {
                const formatTime = t => Intl.DateTimeFormat(
                    "ar-EG",
                    {
                        hour: "numeric",
                        minute: "2-digit",
                    }
                ).format(t).replace("ص", "صباحاً").replace("م", "مساءً");
                
                const timeStart = formatTime(new Date(`0000-01-01 ${sesh.time.start}:00`).getTime());
                const timeEnd = formatTime(new Date(`0000-01-01 ${sesh.time.end}:00`).getTime());
                
                const days = sesh.days.map(d => dayNames[d]);
                
                return `${days.join(" و")} من ${timeStart} إلى ${timeEnd}`;
            };
            
            
            
            $("document").ready(() => {
                var t = $('#datatable')
                    .DataTable({
                        language: {
                            url: "/plugins/datatables/locale/ar.json"
                        },
                        paging: true,
                        lengthChange: false,
                        searching: true,
                        ordering: true,
                        autoWidth: false,
                        responsive: true,
                        serverSide: false,
                        initComplete: function () {
                            const api = this.api();

                            const addButtons = buttons => {
                                new $.fn.dataTable.Buttons(api, { buttons });
                                api.buttons().container().appendTo('#tableButtons');
                            }
                            
                            addButtons(["colvis"]);
                        },
                        columnDefs: [
                            { targets: [-1], orderable: false }
                        ]
                    });
                    
                $("#search").on("input", (e) => {
                    const q = e.target.value;
                    console.log(q);
                    t.column(0).search(q).draw();
                });
                
                
                const buttonsCellTemplate = $("#buttonsCellTemplate");
                buttonsCellTemplate.remove();
                buttonsCellTemplate.removeClass("d-none");
                
                const formatSessionRow = (courseName, session) => {
                    const startMonth = Math.floor(Math.random() * 6 + 1);
                    const endMonth = Math.floor(Math.random() * 5) + 1 + startMonth;
                    
                    const tr = $("<tr></tr>");
                    
                    const cells = [
                        $(`<td>${courseName}</td>`),
                        $(`<td>${getNextInstructor()}</td>`),
                        $(`<td>${new Date(2023, startMonth, 1).toISOString().split("T")[0]}</td>`),
                        $(`<td>${new Date(2023, endMonth, 1).toISOString().split("T")[0]}</td>`),
                        $(`<td>${formatSession(session)}</td>`),
                        buttonsCellTemplate.clone(),
                    ];
                    
                    tr.append(cells);
                    console.log(tr[0]);
                    
                    return tr;
                }
                
                const rows = [];
                
                for (let course of Object.values(courses)) {
                    for (let session of course.sessions) {
                        const row = formatSessionRow(course.name, session);
                        t.row.add(row);
                    }
                }
            });
            
        </script>
    </body>

</html>